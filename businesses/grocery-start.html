<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ü–æ–∫—É–ø–∫–∞ ‚Äî –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω</title>
<style>
  :root { --accent:#00e0c6; --glass: rgba(255,255,255,.15); }
  html,body{margin:0;height:100%;font-family:'Inter',system-ui,Arial,sans-serif;background:linear-gradient(180deg,#20C6B8 0%,#1A2C5B 100%);color:#fff}
  .top-info{position:fixed;top:16px;left:50%;transform:translateX(-50%);display:flex;gap:8px;flex-wrap:wrap;z-index:1000}
  .info-box{background:var(--glass);border:1px solid rgba(255,255,255,.25);backdrop-filter: blur(10px);border-radius:20px;padding:10px 16px;font-weight:800}
  .wrap{padding:120px 14px 110px;max-width:760px;margin:0 auto}
  .title{display:flex;align-items:center;gap:10px;justify-content:center;margin-bottom:12px;font-size:22px;font-weight:900}
  .sub{opacity:.9;text-align:center;margin-bottom:16px}
  .grid{display:grid;grid-template-columns: repeat(auto-fit,minmax(230px,1fr));gap:14px}
  .opt{background:#fff;color:#111;border-radius:16px;padding:12px;cursor:pointer;box-shadow:0 10px 28px rgba(0,0,0,.22);border:2px solid transparent;transition:.2s}
  .opt:hover{transform: translateY(-2px);box-shadow:0 14px 34px rgba(0,0,0,.28)}
  .opt.selected{border-color:#00e0c6}
  .opt h3{margin:0 0 8px;font-size:18px}
  .row{display:flex;justify-content:space-between;margin:6px 0}
  .muted{color:#555;font-weight:600}.strong{font-weight:900}
  .form{background:#fff;color:#111;margin-top:14px;border-radius:16px;padding:12px;box-shadow:0 10px 28px rgba(0,0,0,.22)}
  .form label{display:block;font-weight:700;margin-bottom:6px}
  .form input{width:100%;padding:12px;border-radius:12px;border:1px solid #e5e7eb;font-size:16px}
  .buy{margin-top:12px;width:100%;background:var(--accent);color:#03201b;border:none;border-radius:12px;padding:14px;font-weight:900;cursor:pointer}
  .buy:disabled{opacity:.6;cursor:not-allowed}
  .hint{font-size:12px;color:#555;margin-top:6px}
  .bottom-nav{position:fixed;bottom:0;left:0;right:0;height:70px;background:var(--glass);backdrop-filter: blur(10px);display:flex;justify-content:space-around;align-items:center;z-index:1000}
  .nav-item{display:flex;flex-direction:column;align-items:center;text-decoration:none;color:#fff;font-size:12px}
  .nav-item img{width:28px;height:28px;margin-bottom:4px}
  .nav-item.active span{color:var(--accent)}
</style>
</head>
<body>
<div class="top-info">
  <div class="info-box" id="balanceBox">–ë–∞–ª–∞–Ω—Å: 0 ‚ÇΩ</div>
  <div class="info-box" id="incomeBox">üí∞ –î–æ—Ö–æ–¥ –≤ —á–∞—Å: 0 ‚ÇΩ</div>
</div>

<div class="wrap">
  <div class="title">–ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω ‚Äî –≤—ã–±–æ—Ä —Å–µ—Ç–∏</div>
  <div class="sub">–í—ã–±–µ—Ä–∏ —Å–µ—Ç—å, –∑–∞–¥–∞–π –∏–º—è –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –∫—É–ø–∏ –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å.</div>

  <div class="grid" id="options">
    <div class="opt" data-stage="local"><h3>üè™ –ú–µ—Å—Ç–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω</h3>
      <div class="row"><div class="muted">–¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è</div><div class="strong" id="c_local">‚Äî</div></div>
      <div class="row"><div class="muted">–î–æ—Ö–æ–¥ –≤ —á–∞—Å</div><div class="strong" id="i_local">‚Äî</div></div>
      <div class="row"><div class="muted">–î–æ—Ö–æ–¥ / 15—Å</div><div class="strong" id="t_local">‚Äî</div></div>
    </div>
    <div class="opt" data-stage="chain"><h3>üõí –ù–µ–±–æ–ª—å—à–∞—è —Å–µ—Ç—å</h3>
      <div class="row"><div class="muted">–¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è</div><div class="strong" id="c_chain">‚Äî</div></div>
      <div class="row"><div class="muted">–î–æ—Ö–æ–¥ –≤ —á–∞—Å</div><div class="strong" id="i_chain">‚Äî</div></div>
      <div class="row"><div class="muted">–î–æ—Ö–æ–¥ / 15—Å</div><div class="strong" id="t_chain">‚Äî</div></div>
    </div>
    <div class="opt" data-stage="corp"><h3>üè¨ –ö—Ä—É–ø–Ω–∞—è —Å–µ—Ç—å</h3>
      <div class="row"><div class="muted">–¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è</div><div class="strong" id="c_corp">‚Äî</div></div>
      <div class="row"><div class="muted">–î–æ—Ö–æ–¥ –≤ —á–∞—Å</div><div class="strong" id="i_corp">‚Äî</div></div>
      <div class="row"><div class="muted">–î–æ—Ö–æ–¥ / 15—Å</div><div class="strong" id="t_corp">‚Äî</div></div>
    </div>
  </div>

  <div class="form">
    <label for="shopName">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞</label>
    <input id="shopName" maxlength="24" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Harvest Hub">
    <button class="buy" id="buyBtn" disabled>–ö—É–ø–∏—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å</button>
    <div class="hint">–ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ—Ç–∏. –¶–µ–Ω—ã –∏ –¥–æ—Ö–æ–¥—ã ‚Äî RUB, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –≤ UI.</div>
  </div>
</div>

<div class="bottom-nav">
  <a href="../fun.html" class="nav-item"><img src="../assets/fun.png"><span>–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</span></a>
  <a href="../business.html" class="nav-item active"><img src="../assets/business.png"><span>–ë–∏–∑–Ω–µ—Å—ã</span></a>
  <a href="../index.html" class="nav-item"><img src="../assets/earn.png"><span>–ó–∞—Ä–∞–±–æ—Ç–æ–∫</span></a>
  <a href="../profile.html" class="nav-item"><img src="../assets/profile.png"><span>–ü—Ä–æ—Ñ–∏–ª—å</span></a>
  <a href="../settings.html" class="nav-item"><img src="../assets/settings.png"><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></a>
</div>

<script>
  // ==== —É—Ç–∏–ª—ã
  const rates={"‚ÇΩ":1,"‚Ç∏":6.5,"$":0.012,"‚Ç¨":0.011};
  const cur=()=>localStorage.getItem('currency')||'‚ÇΩ';
  const fmt2=n=>Number(n).toLocaleString('ru-RU',{minimumFractionDigits:2,maximumFractionDigits:2});
  const BAL_K='balance_rub', IPH_K='income_per_hour';
  const getRub=k=>parseFloat(localStorage.getItem(k)||'0')||0;
  const setRub=(k,v)=>localStorage.setItem(k,String(v));

  // –∫–ª—é—á–∏ –ø–æ —Å–µ—Ç—è–º
  const K={
    local:{lvl:'biz_grocery_local_lvl',iph:'biz_grocery_local_iph',name:'biz_grocery_local_name',inv:'biz_grocery_local_invested_rub'},
    chain:{lvl:'biz_grocery_chain_lvl',iph:'biz_grocery_chain_iph',name:'biz_grocery_chain_name',inv:'biz_grocery_chain_invested_rub'},
    corp: {lvl:'biz_grocery_corp_lvl', iph:'biz_grocery_corp_iph', name:'biz_grocery_corp_name', inv:'biz_grocery_corp_invested_rub'},
  };

  // –ø–∞—Ä–∞–º–µ—Ç—Ä—ã L1
  const P={
    local:{cost:150000, iph:3600},
    chain:{cost:1200000, iph:30000},
    corp: {cost:9600000, iph:240000},
  };

  function refreshBars(){
    const c=cur();
    document.getElementById('balanceBox').textContent=`–ë–∞–ª–∞–Ω—Å: ${fmt2(getRub(BAL_K)*rates[c])} ${c}`;
    document.getElementById('incomeBox').textContent=`üí∞ –î–æ—Ö–æ–¥ –≤ —á–∞—Å: ${fmt2((parseFloat(localStorage.getItem(IPH_K))||0)*rates[c])} ${c}`;
  }
  function fillOptions(){
    const c=cur();
    const fill=(id, val)=>document.getElementById(id).textContent=`${fmt2(val*rates[c])} ${c}`;
    fill('c_local',P.local.cost); fill('i_local',P.local.iph); fill('t_local',P.local.iph/240);
    fill('c_chain',P.chain.cost); fill('i_chain',P.chain.iph); fill('t_chain',P.chain.iph/240);
    fill('c_corp', P.corp.cost ); fill('i_corp', P.corp.iph ); fill('t_corp', P.corp.iph/240);
  }
  refreshBars(); fillOptions();

  // –µ—Å–ª–∏ –∫–∞–∫–∞—è-—Ç–æ —Å–µ—Ç—å —É–∂–µ –∫—É–ø–ª–µ–Ω–∞, –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ–º –ø–æ–∫—É–ø–∞—Ç—å –¥—Ä—É–≥–∏–µ (–∫–∞–∂–¥–∞—è ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

  // –≤—ã–±–æ—Ä
  let selected=null;
  document.querySelectorAll('.opt').forEach(el=>{
    el.onclick=()=>{ document.querySelectorAll('.opt').forEach(x=>x.classList.remove('selected'));
      el.classList.add('selected'); selected=el.dataset.stage; enable(); };
  });
  const nameInput=document.getElementById('shopName'), buyBtn=document.getElementById('buyBtn');
  nameInput.addEventListener('input',enable);
  function enable(){ buyBtn.disabled= !selected || nameInput.value.trim().length<2; }

  // –ø–æ–∫—É–ø–∫–∞ L1
  buyBtn.onclick=()=>{
    if(!selected) return;
    const nm=nameInput.value.trim();
    const price=P[selected].cost;
    let bal=getRub(BAL_K);
    if(bal<price){ const c=cur(); alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤: –Ω—É–∂–Ω–æ ${fmt2(price*rates[c])} ${c}`); return; }

    // —Å–ø–∏—Å–∞–Ω–∏–µ, —Ñ–∏–∫—Å–∞—Ü–∏—è L1
    setRub(BAL_K, bal-price);
    localStorage.setItem(K[selected].lvl, '1');
    setRub(K[selected].iph, P[selected].iph);
    localStorage.setItem(K[selected].name, nm);
    setRub(K[selected].inv, getRub(K[selected].inv)+price);

    // –ø—Ä–∏–±–∞–≤–ª—è–µ–º –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É IPH —Ç–æ–ª—å–∫–æ –≤–∫–ª–∞–¥ —ç—Ç–æ–π —Å–µ—Ç–∏
    const tot=(parseFloat(localStorage.getItem(IPH_K))||0)+P[selected].iph;
    localStorage.setItem(IPH_K, String(tot));

    // —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –°–í–û–Æ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Ç–∏
    const target = selected==='local'?'grocery-local.html':(selected==='chain'?'grocery-chain.html':'grocery-corp.html');
    location.replace(target);
  };

  setInterval(refreshBars,2000);
</script>
</body>
</html>
